{"version":3,"file":"index.js","sources":["../src/FunctionIo.js","../src/utils.js","../src/FunctionCall.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  View,\n  Icon,\n  Text,\n  Input,\n  Label,\n  Item,\n  Accordion,\n} from 'native-base';\n\nconst nonStringTypes = ['int', 'float', 'tuple', 'boolean'];\nconst checkNonString = itemType => nonStringTypes.find(typ => (itemType.includes(typ) || itemType[0] === 'i' || itemType[0] === 'u'));\nconst decodeValueString = value => value || '';\nconst encodeValueString = value => value || '';\nconst decodeValueNonString = value => value ? JSON.parse(value) : null;\nconst encodeValueNonString = value => value ? JSON.stringify(value) : '';\n\nfunction IoUI(props) {\n  const { item } = props;\n  const isNonString = checkNonString(item.type);\n  let decodeValue, encodeValue;\n\n  if (isNonString) {\n    decodeValue = decodeValueNonString;\n    encodeValue = encodeValueNonString;\n  } else {\n    decodeValue = decodeValueString;\n    encodeValue = encodeValueString;\n  }\n\n  if (item.type === 'link') {\n    return (\n      <Text\n        accessibilityRole='link'\n        href={props.value}\n        style={{color: 'blue'}}\n        target='_blank'\n      >\n        {props.value}\n      </Text>\n    )\n  }\n\n  return (\n    <Input\n      value={encodeValue(props.value)}\n      onChangeText={(text) => props.onValueChange(decodeValue(text))}\n      styles={props.styles}\n      disabled={props.readonly}\n    />\n  )\n}\n\nexport default class FunctionIo extends Component {\n  // static propTypes = {\n  //   text: PropTypes.string\n  // }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      componentsOpened: false,\n      componentValues: props.value,\n    }\n\n    // this.onValueChange = this.onValueChange.bind(this);\n    this.onComponentsValueChange = this.onComponentsValueChange.bind(this);\n    this.onOpenComponents = this.onOpenComponents.bind(this);\n\n    this._renderHeader = this._renderHeader.bind(this);\n    this._renderContent = this._renderContent.bind(this);\n  }\n\n  getLabel(item) {\n    return item.label || `${item.name}:${item.type}`;\n  }\n\n  onOpenComponents() {\n    this.setState({ componentsOpened: true });\n  }\n\n  onComponentsValueChange(value, i) {\n    const componentValues = this.state.componentValues;\n    componentValues[i] = value;\n    this.setState({ componentValues });\n    this.props.onValueChange(componentValues);\n  }\n\n  _renderHeader(item, expanded) {\n    const label = this.getLabel(item);\n    return (\n      <View\n        style={{\n          padding: 5,\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          backgroundColor: '#fafafa',\n          ...this.props.styles,\n        }}\n      >\n        <View style={{ ...this.props.styles, flexDirection: 'row' }}>\n          {expanded\n            ? <Icon style={{ fontSize: 18 }} name='remove-circle' />\n            : <Icon style={{ fontSize: 18 }} name='add-circle' />\n          }\n          <Item stackedLabel style={{ ...this.props.styles, maxWidth: this.props.styles.minWidth }}>\n            <Label>{label}</Label>\n            <IoUI\n              item={item}\n              value={this.props.value}\n              onValueChange={this.props.onValueChange}\n              styles={this.props.styles}\n              readonly={this.props.readonly}\n            />\n          </Item>\n        </View>\n      </View>\n    )\n  }\n\n  _renderContent(item) {\n    return (item.components || []).map((subio, i) => {\n      return (\n        <FunctionIo\n          key={i}\n          styles={this.props.styles}\n          item={subio}\n          value={this.props.value[i]}\n          onValueChange={(value) => this.onComponentsValueChange(value, i)}\n          readonly={this.props.readonly}\n        />\n      );\n    });\n  }\n\n  render() {\n    const { item, styles, readonly } = this.props;\n    if (!item) return (<Text>---</Text>);\n\n    const label = this.getLabel(item);\n    return (\n      <View style={{ ...styles, flexDirection: 'row', alignItems: 'center'}}>\n        {!item.components || item.components.length === 0\n          ? <Item stackedLabel style={{ width: '100%' }}>\n            <Label>{label}</Label>\n            <IoUI\n              styles={styles}\n              item={item}\n              value={this.props.value}\n              onValueChange={this.props.onValueChange}\n              readonly={readonly}\n            />\n          </Item>\n          : <Accordion\n            dataArray={[item]}\n            expanded={0}\n            renderHeader={this._renderHeader}\n            renderContent={this._renderContent}\n            contentStyle={{ ...styles, flex: 1, backgroundColor: '#ffffff' }}\n          />\n        }\n      </View>\n    );\n  }\n}\n","export const CHAIN_NAMES = {\n  1: 'mainnet',\n  3: 'ropsten',\n  4: 'rinkeby',\n  5: 'goerli',\n  42: 'kovan',\n}\n\nexport const getEtherscanApi = (chainid) => {\n  let chainname = CHAIN_NAMES[chainid];\n  if (chainid === 1) chainname = '';\n  else chainname += '.';\n  return `https://${chainname}etherscan.io`;\n}\n\nexport const getEtherscanApiContract = (chainid, address) => {\n  return `${getEtherscanApi(chainid)}/address/${address}#code`;\n}\n\nexport const getEtherscanTx = (chainid, txhash) => {\n  return `${getEtherscanApi(chainid)}/tx/${txhash}`;\n}\n\nexport const PRERECEIPT_TYPE = {\n  name: 'receipt',\n  type: 'tuple',\n  components: [\n    {\n      name: 'etherscan',\n      type: 'link',\n    },\n    {\n      name: 'hash',\n      type: 'string',\n    },\n    {\n      name: 'blockHash',\n      type: 'string',\n    },\n    {\n      name: 'blockNumber',\n      type: 'uint256',\n    },\n    {\n      name: 'confirmations',\n      type: 'uint256',\n    },\n  ]\n}\n\nexport const RECEIPT_TYPE = {\n  name: 'receipt',\n  type: 'tuple',\n  components: [\n    {\n      name: 'etherscan',\n      type: 'link',\n    },\n    {\n      name: 'transactionHash',\n      type: 'string',\n    },\n    {\n      name: 'blockHash',\n      type: 'string',\n    },\n    {\n      name: 'blockNumber',\n      type: 'uint256',\n    },\n    {\n      name: 'confirmations',\n      type: 'uint256',\n    },\n  ]\n}\n","import React, { Component } from 'react';\nimport { StyleSheet } from 'react-native';\nimport {\n  Content,\n  View,\n  Card,\n  CardItem,\n  Icon,\n  Text,\n  Button,\n  H1,\n  Right,\n  Left,\n} from 'native-base';\n\nimport FunctionIo from './FunctionIo.js';\nimport { getEtherscanTx, PRERECEIPT_TYPE, RECEIPT_TYPE } from './utils.js';\n\nfunction defaultVals(abityp) {\n  if (!abityp || !abityp.components) {\n    return [];\n  }\n  let item = new Array(abityp.components.length);\n  abityp.components.forEach((comp, i) => {\n    if (comp.components) {\n      item[i] = defaultVals(comp);\n    }\n  });\n  return item;\n}\n\nexport default class FunctionCall extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inputs: this.initInputsState(),\n      outputs: this.initOutputsState(),\n    }\n\n    this.buttonStyle = props.buttonStyle || styles.buttonStyle;\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onRun = this.onRun.bind(this);\n  }\n\n  initInputsState() {\n    const { pfunction } = this.props.item;\n    const ioGapiInputs = this.ioGapiInputs(pfunction);\n    return ioGapiInputs && ioGapiInputs.components\n      ? new Array(ioGapiInputs.components.length)\n      : [];\n  }\n\n  initOutputsState() {\n    const { pfunction } = this.props.item;\n    const ioGapiOutputs = this.ioGapiOutputs(pfunction);\n    return defaultVals(ioGapiOutputs);\n  }\n\n  typesig(typ) {\n    let sig = '';\n    if (typ.name) sig += `${typ.name}:`;\n    sig += typ.type;\n    return sig;\n  }\n\n  ioGapiInputs(pfunction) {\n    const signatureInp = `(${pfunction.gapi.inputs.map(inp => this.typesig(inp)).join(',')})`;\n\n    return pfunction.gapi.inputs.length > 0 ? {\n      name: pfunction.signatureString,\n      type: 'tuple',\n      components: pfunction.gapi.inputs,\n      label: signatureInp,\n    } : null;\n  }\n\n  ioGapiOutputs(pfunction) {\n    let outputs = JSON.parse(JSON.stringify(\n      pfunction.gapi.outputs || []\n    ));\n\n    let signatureOut = `(${outputs.map(inp => this.typesig(inp)).join(',')})`;\n\n    if (\n      pfunction.gapi.stateMutability === 'payable'\n      || pfunction.gapi.stateMutability === 'nonpayable'\n    ) {\n      outputs = PRERECEIPT_TYPE.components;\n      signatureOut = 'receipt' + `(${outputs.map(inp => this.typesig(inp)).join(',')})`;\n    }\n\n    return outputs.length > 0 ? {\n      name: pfunction.signatureString,\n      type: 'tuple',\n      components: outputs,\n      label: signatureOut,\n    } : null;\n  }\n\n  onValueChange(inputs) {\n    this.setState({ inputs });\n    if (this.props.onChange) {\n      this.props.onChange({ inputs, outputs: this.state.outputs });\n    }\n  }\n\n  async onRun() {\n    const { deployment, pfunction } = this.props.item;\n    const { onRun } = this.props;\n\n    const result = await onRun(this.state.inputs);\n\n    console.log('result', result);\n    let outputs = (result instanceof Array) ? result : [result];\n\n    if (\n      pfunction.gapi.stateMutability === 'payable'\n      || pfunction.gapi.stateMutability === 'nonpayable'\n    ) {\n      outputs = PRERECEIPT_TYPE.components.map(comp => {\n        if (comp.name === 'etherscan') {\n          return getEtherscanTx(deployment.chainid, result.hash);\n        }\n        if (!result[comp.name]) return 'waiting';\n        return result[comp.name];\n      });\n      this.setState({ outputs });\n\n      const receipt = await result.wait(2);\n      console.log('receipt', receipt);\n\n      outputs = RECEIPT_TYPE.components.map(comp => {\n        if (comp.name === 'etherscan') {\n          return getEtherscanTx(deployment.chainid, receipt.transactionHash);\n        }\n        return receipt[comp.name];\n      });\n    }\n\n    this.setState({ outputs });\n\n    if (this.props.onChange) {\n      this.props.onChange({ inputs: this.state.inputs, outputs});\n    }\n  }\n\n  render() {\n    const { pfunction } = this.props.item;\n    const width = this.props.styles.minWidth - 40;\n    const ioStyles = { minWidth: width, width };\n\n    const ioGapiInputs = this.ioGapiInputs(pfunction);\n    const ioGapiOutputs = this.ioGapiOutputs(pfunction);\n\n    return (\n      <View style={{...this.props.styles, flex: 1, width: this.props.styles.minWidth }}>\n        <Content>\n          <CardItem style={{ backgroundColor: this.props.pfunctionColor(pfunction.gapi) }}>\n            <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n              <H1 style={{ paddingRight: 20 }}>{pfunction.gapi.name}</H1>\n            </View>\n          </CardItem>\n          <Card>\n            <CardItem header>\n              <Text>Inputs</Text>\n            </CardItem>\n            <CardItem>\n              <FunctionIo\n                item={ioGapiInputs}\n                value={this.state.inputs}\n                onValueChange={this.onValueChange}\n                styles={ioStyles}\n              />\n            </CardItem>\n            <CardItem header>\n              <Text>Outputs</Text>\n            </CardItem>\n            <CardItem>\n              <FunctionIo\n                item={ioGapiOutputs}\n                readonly={true}\n                value={this.state.outputs}\n                styles={ioStyles}\n              />\n            </CardItem>\n          </Card>\n        </Content>\n        <View style={{\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: 5,\n          borderTopWidth: 1,\n          borderTopColor: '#cccccc',\n        }}>\n          <Left>\n            <Button small rounded style={this.buttonStyle} onClick={this.props.onInfoClosed} >\n              <Icon type='MaterialCommunityIcons' name='close' />\n            </Button>\n          </Left>\n          <Right>\n            <Button small rounded style={this.buttonStyle} onClick={this.onRun} >\n              <Icon type='MaterialCommunityIcons' name='play' />\n            </Button>\n          </Right>\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n    },\n  }\n)\n"],"names":["nonStringTypes","checkNonString","find","itemType","includes","typ","decodeValueString","value","encodeValueString","decodeValueNonString","JSON","parse","encodeValueNonString","stringify","IoUI","props","item","isNonString","type","decodeValue","encodeValue","React","color","Input","text","onValueChange","styles","readonly","FunctionIo","state","onComponentsValueChange","bind","onOpenComponents","_renderHeader","_renderContent","label","name","setState","componentsOpened","i","componentValues","expanded","getLabel","flexDirection","Icon","fontSize","maxWidth","minWidth","components","map","subio","alignItems","length","width","Accordion","flex","backgroundColor","Component","CHAIN_NAMES","getEtherscanApi","chainid","chainname","getEtherscanTx","txhash","PRERECEIPT_TYPE","RECEIPT_TYPE","defaultVals","abityp","Array","forEach","comp","FunctionCall","initInputsState","initOutputsState","buttonStyle","onRun","pfunction","ioGapiInputs","ioGapiOutputs","sig","signatureInp","gapi","inputs","typesig","inp","join","signatureString","outputs","signatureOut","stateMutability","onChange","deployment","log","result","hash","wait","receipt","transactionHash","ioStyles","pfunctionColor","paddingRight","onInfoClosed","StyleSheet","create"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,IAAMA,iBAAiB,CAAC,KAAD,EAAQ,OAAR,EAAiB,OAAjB,EAA0B,SAA1B,CAAvB;AACA,IAAMC,iBAAiB,SAAjBA,cAAiB;SAAYD,eAAeE,IAAf,CAAoB;WAAQC,SAASC,QAAT,CAAkBC,GAAlB,KAA0BF,SAAS,CAAT,MAAgB,GAA1C,IAAiDA,SAAS,CAAT,MAAgB,GAAzE;GAApB,CAAZ;CAAvB;AACA,IAAMG,oBAAoB,SAApBA,iBAAoB;SAASC,SAAS,EAAlB;CAA1B;AACA,IAAMC,oBAAoB,SAApBA,iBAAoB;SAASD,SAAS,EAAlB;CAA1B;AACA,IAAME,uBAAuB,SAAvBA,oBAAuB;SAASF,QAAQG,KAAKC,KAAL,CAAWJ,KAAX,CAAR,GAA4B,IAArC;CAA7B;AACA,IAAMK,uBAAuB,SAAvBA,oBAAuB;SAASL,QAAQG,KAAKG,SAAL,CAAeN,KAAf,CAAR,GAAgC,EAAzC;CAA7B;;AAEA,SAASO,IAAT,CAAcC,KAAd,EAAqB;MACXC,IADW,GACFD,KADE,CACXC,IADW;;MAEbC,cAAchB,eAAee,KAAKE,IAApB,CAApB;MACIC,oBAAJ;MAAiBC,oBAAjB;;MAEIH,WAAJ,EAAiB;kBACDR,oBAAd;kBACcG,oBAAd;GAFF,MAGO;kBACSN,iBAAd;kBACcE,iBAAd;;;MAGEQ,KAAKE,IAAL,KAAc,MAAlB,EAA0B;WAEtBG;qBAAA;;2BACoB,MADpB;cAEQN,MAAMR,KAFd;eAGS,EAACe,OAAO,MAAR,EAHT;gBAIS;;YAEAf;KAPX;;;SAaAc,6BAACE,gBAAD;WACSH,YAAYL,MAAMR,KAAlB,CADT;kBAEgB,sBAACiB,IAAD;aAAUT,MAAMU,aAAN,CAAoBN,YAAYK,IAAZ,CAApB,CAAV;KAFhB;YAGUT,MAAMW,MAHhB;cAIYX,MAAMY;IALpB;;;IAUmBC;;;;;;;sBAKPb,KAAZ,EAAmB;;;uHACXA,KADW;;UAEZc,KAAL,GAAa;wBACO,KADP;uBAEMd,MAAMR;;;KAFzB,CAMA,MAAKuB,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BC,IAA7B,OAA/B;UACKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,OAAxB;;UAEKE,aAAL,GAAqB,MAAKA,aAAL,CAAmBF,IAAnB,OAArB;UACKG,cAAL,GAAsB,MAAKA,cAAL,CAAoBH,IAApB,OAAtB;;;;;;6BAGOf,MAAM;aACNA,KAAKmB,KAAL,IAAiBnB,KAAKoB,IAAtB,SAA8BpB,KAAKE,IAA1C;;;;uCAGiB;WACZmB,QAAL,CAAc,EAAEC,kBAAkB,IAApB,EAAd;;;;4CAGsB/B,OAAOgC,GAAG;UAC1BC,kBAAkB,KAAKX,KAAL,CAAWW,eAAnC;sBACgBD,CAAhB,IAAqBhC,KAArB;WACK8B,QAAL,CAAc,EAAEG,gCAAF,EAAd;WACKzB,KAAL,CAAWU,aAAX,CAAyBe,eAAzB;;;;kCAGYxB,MAAMyB,UAAU;UACtBN,QAAQ,KAAKO,QAAL,CAAc1B,IAAd,CAAd;aAEEK;uBAAA;;;qBAEa,CADX;2BAEiB,KAFjB;4BAGkB,eAHlB;wBAIc,QAJd;6BAKmB;aACd,KAAKN,KAAL,CAAWW,MANhB;;;yBASA;YAAM,oBAAY,KAAKX,KAAL,CAAWW,MAAvB,IAA+BiB,eAAe,KAA9C,GAAN;qBAEMtB,6BAACuB,eAAD,IAAM,OAAO,EAAEC,UAAU,EAAZ,EAAb,EAA+B,MAAK,eAApC,GADH,GAEGxB,6BAACuB,eAAD,IAAM,OAAO,EAAEC,UAAU,EAAZ,EAAb,EAA+B,MAAK,YAApC,GAHN;;2BAKE;cAAM,kBAAN,EAAmB,oBAAY,KAAK9B,KAAL,CAAWW,MAAvB,IAA+BoB,UAAU,KAAK/B,KAAL,CAAWW,MAAX,CAAkBqB,QAA3D,GAAnB;;8BACE;;;aADF;yCAEG,IAAD;oBACQ/B,IADR;qBAES,KAAKD,KAAL,CAAWR,KAFpB;6BAGiB,KAAKQ,KAAL,CAAWU,aAH5B;sBAIU,KAAKV,KAAL,CAAWW,MAJrB;wBAKY,KAAKX,KAAL,CAAWY;;;;OAvB/B;;;;mCA+BaX,MAAM;;;aACZ,CAACA,KAAKgC,UAAL,IAAmB,EAApB,EAAwBC,GAAxB,CAA4B,UAACC,KAAD,EAAQX,CAAR,EAAc;eAE7ClB,6BAAC,UAAD;eACOkB,CADP;kBAEU,OAAKxB,KAAL,CAAWW,MAFrB;gBAGQwB,KAHR;iBAIS,OAAKnC,KAAL,CAAWR,KAAX,CAAiBgC,CAAjB,CAJT;yBAKiB,uBAAChC,KAAD;mBAAW,OAAKuB,uBAAL,CAA6BvB,KAA7B,EAAoCgC,CAApC,CAAX;WALjB;oBAMY,OAAKxB,KAAL,CAAWY;UAPzB;OADK,CAAP;;;;6BAcO;mBAC4B,KAAKZ,KADjC;UACCC,IADD,UACCA,IADD;UACOU,MADP,UACOA,MADP;UACeC,QADf,UACeA,QADf;;UAEH,CAACX,IAAL,EAAW,OAAQK;uBAAA;;;OAAR;;UAELc,QAAQ,KAAKO,QAAL,CAAc1B,IAAd,CAAd;aAEEK;uBAAA;UAAM,oBAAYK,MAAZ,IAAoBiB,eAAe,KAAnC,EAA0CQ,YAAY,QAAtD,GAAN;SACInC,KAAKgC,UAAN,IAAoBhC,KAAKgC,UAAL,CAAgBI,MAAhB,KAA2B,CAA/C,GACG/B;yBAAA;YAAM,kBAAN,EAAmB,OAAO,EAAEgC,OAAO,MAAT,EAA1B;;4BACA;;;WADA;uCAEC,IAAD;oBACU3B,MADV;kBAEQV,IAFR;mBAGS,KAAKD,KAAL,CAAWR,KAHpB;2BAIiB,KAAKQ,KAAL,CAAWU,aAJ5B;sBAKYE;;SARf,GAWGN,6BAACiC,oBAAD;qBACW,CAACtC,IAAD,CADX;oBAEU,CAFV;wBAGc,KAAKiB,aAHnB;yBAIe,KAAKC,cAJpB;qCAKmBR,MAAnB,IAA2B6B,MAAM,CAAjC,EAAoCC,iBAAiB,SAArD;;OAlBR;;;;EAxFoCC;;ACvDjC,IAAMC,cAAc;KACtB,SADsB;KAEtB,SAFsB;KAGtB,SAHsB;KAItB,QAJsB;MAKrB;CALC;;AAQP,AAAO,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,OAAD,EAAa;MACtCC,YAAYH,YAAYE,OAAZ,CAAhB;MACIA,YAAY,CAAhB,EAAmBC,YAAY,EAAZ,CAAnB,KACKA,aAAa,GAAb;sBACaA,SAAlB;CAJK;;AAWP,AAAO,IAAMC,iBAAiB,SAAjBA,cAAiB,CAACF,OAAD,EAAUG,MAAV,EAAqB;SACvCJ,gBAAgBC,OAAhB,CAAV,YAAyCG,MAAzC;CADK;;AAIP,AAAO,IAAMC,kBAAkB;QACvB,SADuB;QAEvB,OAFuB;cAGjB,CACV;UACQ,WADR;UAEQ;GAHE,EAKV;UACQ,MADR;UAEQ;GAPE,EASV;UACQ,WADR;UAEQ;GAXE,EAaV;UACQ,aADR;UAEQ;GAfE,EAiBV;UACQ,eADR;UAEQ;GAnBE;CAHP;;AA2BP,AAAO,IAAMC,eAAe;QACpB,SADoB;QAEpB,OAFoB;cAGd,CACV;UACQ,WADR;UAEQ;GAHE,EAKV;UACQ,iBADR;UAEQ;GAPE,EASV;UACQ,WADR;UAEQ;GAXE,EAaV;UACQ,aADR;UAEQ;GAfE,EAiBV;UACQ,eADR;UAEQ;GAnBE;CAHP;;AChCP,SAASC,WAAT,CAAqBC,MAArB,EAA6B;MACvB,CAACA,MAAD,IAAW,CAACA,OAAOnB,UAAvB,EAAmC;WAC1B,EAAP;;MAEEhC,OAAO,IAAIoD,KAAJ,CAAUD,OAAOnB,UAAP,CAAkBI,MAA5B,CAAX;SACOJ,UAAP,CAAkBqB,OAAlB,CAA0B,UAACC,IAAD,EAAO/B,CAAP,EAAa;QACjC+B,KAAKtB,UAAT,EAAqB;WACdT,CAAL,IAAU2B,YAAYI,IAAZ,CAAV;;GAFJ;SAKOtD,IAAP;;;IAGmBuD;;;wBACPxD,KAAZ,EAAmB;;;2HACXA,KADW;;UAGZc,KAAL,GAAa;cACH,MAAK2C,eAAL,EADG;eAEF,MAAKC,gBAAL;KAFX;;UAKKC,WAAL,GAAmB3D,MAAM2D,WAAN,IAAqBhD,OAAOgD,WAA/C;;UAEKjD,aAAL,GAAqB,MAAKA,aAAL,CAAmBM,IAAnB,OAArB;UACK4C,KAAL,GAAa,MAAKA,KAAL,CAAW5C,IAAX,OAAb;;;;;;sCAGgB;UACR6C,SADQ,GACM,KAAK7D,KAAL,CAAWC,IADjB,CACR4D,SADQ;;UAEVC,eAAe,KAAKA,YAAL,CAAkBD,SAAlB,CAArB;aACOC,gBAAgBA,aAAa7B,UAA7B,GACH,IAAIoB,KAAJ,CAAUS,aAAa7B,UAAb,CAAwBI,MAAlC,CADG,GAEH,EAFJ;;;;uCAKiB;UACTwB,SADS,GACK,KAAK7D,KAAL,CAAWC,IADhB,CACT4D,SADS;;UAEXE,gBAAgB,KAAKA,aAAL,CAAmBF,SAAnB,CAAtB;aACOV,YAAYY,aAAZ,CAAP;;;;4BAGMzE,KAAK;UACP0E,MAAM,EAAV;UACI1E,IAAI+B,IAAR,EAAc2C,OAAU1E,IAAI+B,IAAd;aACP/B,IAAIa,IAAX;aACO6D,GAAP;;;;iCAGWH,WAAW;;;UAChBI,qBAAmBJ,UAAUK,IAAV,CAAeC,MAAf,CAAsBjC,GAAtB,CAA0B;eAAO,OAAKkC,OAAL,CAAaC,GAAb,CAAP;OAA1B,EAAoDC,IAApD,CAAyD,GAAzD,CAAnB,MAAN;;aAEOT,UAAUK,IAAV,CAAeC,MAAf,CAAsB9B,MAAtB,GAA+B,CAA/B,GAAmC;cAClCwB,UAAUU,eADwB;cAElC,OAFkC;oBAG5BV,UAAUK,IAAV,CAAeC,MAHa;eAIjCF;OAJF,GAKH,IALJ;;;;kCAQYJ,WAAW;;;UACnBW,UAAU7E,KAAKC,KAAL,CAAWD,KAAKG,SAAL,CACvB+D,UAAUK,IAAV,CAAeM,OAAf,IAA0B,EADH,CAAX,CAAd;;UAIIC,qBAAmBD,QAAQtC,GAAR,CAAY;eAAO,OAAKkC,OAAL,CAAaC,GAAb,CAAP;OAAZ,EAAsCC,IAAtC,CAA2C,GAA3C,CAAnB,MAAJ;;UAGET,UAAUK,IAAV,CAAeQ,eAAf,KAAmC,SAAnC,IACGb,UAAUK,IAAV,CAAeQ,eAAf,KAAmC,YAFxC,EAGE;kBACUzB,gBAAgBhB,UAA1B;uBACe,mBAAgBuC,QAAQtC,GAAR,CAAY;iBAAO,OAAKkC,OAAL,CAAaC,GAAb,CAAP;SAAZ,EAAsCC,IAAtC,CAA2C,GAA3C,CAAhB,OAAf;;;aAGKE,QAAQnC,MAAR,GAAiB,CAAjB,GAAqB;cACpBwB,UAAUU,eADU;cAEpB,OAFoB;oBAGdC,OAHc;eAInBC;OAJF,GAKH,IALJ;;;;kCAQYN,QAAQ;WACf7C,QAAL,CAAc,EAAE6C,cAAF,EAAd;UACI,KAAKnE,KAAL,CAAW2E,QAAf,EAAyB;aAClB3E,KAAL,CAAW2E,QAAX,CAAoB,EAAER,cAAF,EAAUK,SAAS,KAAK1D,KAAL,CAAW0D,OAA9B,EAApB;;;;;;;;;;;;;8BAKgC,KAAKxE,KAAL,CAAWC,MAArC2E,yBAAAA,YAAYf,wBAAAA;wBACF,KAAK7D,MAAf4D;;uBAEaA,MAAM,KAAK9C,KAAL,CAAWqD,MAAjB;;;;;;wBAEbU,GAAR,CAAY,QAAZ,EAAsBC,MAAtB;0BACeA,kBAAkBzB,KAAnB,GAA4ByB,MAA5B,GAAqC,CAACA,MAAD;;sBAGjDjB,UAAUK,IAAV,CAAeQ,eAAf,KAAmC,SAAnC,IACGb,UAAUK,IAAV,CAAeQ,eAAf,KAAmC;;;;;0BAE5BzB,gBAAgBhB,UAAhB,CAA2BC,GAA3B,CAA+B,gBAAQ;sBAC3CqB,KAAKlC,IAAL,KAAc,WAAlB,EAA+B;2BACtB0B,eAAe6B,WAAW/B,OAA1B,EAAmCiC,OAAOC,IAA1C,CAAP;;sBAEE,CAACD,OAAOvB,KAAKlC,IAAZ,CAAL,EAAwB,OAAO,SAAP;yBACjByD,OAAOvB,KAAKlC,IAAZ,CAAP;iBALQ,CAAV;qBAOKC,QAAL,CAAc,EAAEkD,gBAAF,EAAd;;;uBAEsBM,OAAOE,IAAP,CAAY,CAAZ;;;;;wBACdH,GAAR,CAAY,SAAZ,EAAuBI,OAAvB;;0BAEU/B,aAAajB,UAAb,CAAwBC,GAAxB,CAA4B,gBAAQ;sBACxCqB,KAAKlC,IAAL,KAAc,WAAlB,EAA+B;2BACtB0B,eAAe6B,WAAW/B,OAA1B,EAAmCoC,QAAQC,eAA3C,CAAP;;yBAEKD,QAAQ1B,KAAKlC,IAAb,CAAP;iBAJQ,CAAV;;;;qBAQGC,QAAL,CAAc,EAAEkD,gBAAF,EAAd;;oBAEI,KAAKxE,KAAL,CAAW2E,QAAf,EAAyB;uBAClB3E,KAAL,CAAW2E,QAAX,CAAoB,EAAER,QAAQ,KAAKrD,KAAL,CAAWqD,MAArB,EAA6BK,gBAA7B,EAApB;;;;;;;;;;;;;;;;;;;6BAIK;UACCX,SADD,GACe,KAAK7D,KAAL,CAAWC,IAD1B,CACC4D,SADD;;UAEDvB,QAAQ,KAAKtC,KAAL,CAAWW,MAAX,CAAkBqB,QAAlB,GAA6B,EAA3C;UACMmD,WAAW,EAAEnD,UAAUM,KAAZ,EAAmBA,YAAnB,EAAjB;;UAEMwB,eAAe,KAAKA,YAAL,CAAkBD,SAAlB,CAArB;UACME,gBAAgB,KAAKA,aAAL,CAAmBF,SAAnB,CAAtB;;aAGEvD;uBAAA;UAAM,oBAAW,KAAKN,KAAL,CAAWW,MAAtB,IAA8B6B,MAAM,CAApC,EAAuCF,OAAO,KAAKtC,KAAL,CAAWW,MAAX,CAAkBqB,QAAhE,GAAN;;4BACE;;;+BACE;cAAU,OAAO,EAAES,iBAAiB,KAAKzC,KAAL,CAAWoF,cAAX,CAA0BvB,UAAUK,IAApC,CAAnB,EAAjB;;6BACE;gBAAM,OAAO,EAAEtC,eAAe,KAAjB,EAAwBQ,YAAY,QAApC,EAAb;;6BACE;kBAAI,OAAO,EAAEiD,cAAc,EAAhB,EAAX;0BAA4CnB,IAAV,CAAe7C;;;WAHvD;;2BAME;;;iCACE;gBAAU,YAAV;;+BACE;;;;aAFJ;;iCAIE;;2CACG,UAAD;sBACQyC,YADR;uBAES,KAAKhD,KAAL,CAAWqD,MAFpB;+BAGiB,KAAKzD,aAHtB;wBAIUyE;;aATd;;iCAYE;gBAAU,YAAV;;+BACE;;;;aAbJ;;iCAeE;;2CACG,UAAD;sBACQpB,aADR;0BAEY,IAFZ;uBAGS,KAAKjD,KAAL,CAAW0D,OAHpB;wBAIUW;;;;SA3BlB;;yBAgCE;YAAM,OAAO;6BACI,KADJ;8BAEK,eAFL;0BAGC,QAHD;uBAIF,CAJE;8BAKK,CALL;8BAMK;aANlB;;2BAQE;;;+BACE;gBAAQ,WAAR,EAAc,aAAd,EAAsB,OAAO,KAAKxB,WAAlC,EAA+C,SAAS,KAAK3D,KAAL,CAAWsF,YAAnE;2CACGzD,eAAD,IAAM,MAAK,wBAAX,EAAoC,MAAK,OAAzC;;WAVN;;4BAaE;;;+BACE;gBAAQ,WAAR,EAAc,aAAd,EAAsB,OAAO,KAAK8B,WAAlC,EAA+C,SAAS,KAAKC,KAA7D;2CACG/B,eAAD,IAAM,MAAK,wBAAX,EAAoC,MAAK,MAAzC;;;;OAhDV;;;;EA7HsCa;;;AAsL1C,IAAM/B,SAAS4E,uBAAWC,MAAX,CACb;eACe;qBACM;;CAHR,CAAf;;;;;"}