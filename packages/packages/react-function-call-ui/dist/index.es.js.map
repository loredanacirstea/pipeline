{"version":3,"file":"index.es.js","sources":["../src/FunctionIo.js","../src/utils.js","../src/FunctionCall.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  View,\n  Icon,\n  Text,\n  Input,\n  Label,\n  Item,\n  Accordion,\n} from 'native-base';\n\nconst nonStringTypes = ['int', 'float', 'tuple', 'boolean'];\nconst checkNonString = itemType => nonStringTypes.find(typ => itemType.includes(typ));\nconst decodeValueString = value => value || '';\nconst encodeValueString = value => value || '';\nconst decodeValueNonString = value => value ? JSON.parse(value) : null;\nconst encodeValueNonString = value => value ? JSON.stringify(value) : '';\n\nfunction IoUI(props) {\n  const { item } = props;\n  const isNonString = checkNonString(item.type);\n  let decodeValue, encodeValue;\n\n  if (isNonString) {\n    decodeValue = decodeValueNonString;\n    encodeValue = encodeValueNonString;\n  } else {\n    decodeValue = decodeValueString;\n    encodeValue = encodeValueString;\n  }\n\n  if (item.type === 'link') {\n    return (\n      <Text\n        accessibilityRole='link'\n        href={props.value}\n        style={{color: 'blue'}}\n        target='_blank'\n      >\n        {props.value}\n      </Text>\n    )\n  }\n\n  return (\n    <Input\n      value={encodeValue(props.value)}\n      onChangeText={(text) => props.onValueChange(decodeValue(text))}\n      styles={props.styles}\n      disabled={props.readonly}\n    />\n  )\n}\n\nexport default class FunctionIo extends Component {\n  // static propTypes = {\n  //   text: PropTypes.string\n  // }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      componentsOpened: false,\n      componentValues: props.value,\n    }\n\n    // this.onValueChange = this.onValueChange.bind(this);\n    this.onComponentsValueChange = this.onComponentsValueChange.bind(this);\n    this.onOpenComponents = this.onOpenComponents.bind(this);\n\n    this._renderHeader = this._renderHeader.bind(this);\n    this._renderContent = this._renderContent.bind(this);\n  }\n\n  getLabel(item) {\n    return item.label || `${item.name}:${item.type}`;\n  }\n\n  onOpenComponents() {\n    this.setState({ componentsOpened: true });\n  }\n\n  onComponentsValueChange(value, i) {\n    const componentValues = this.state.componentValues;\n    componentValues[i] = value;\n    this.setState({ componentValues });\n    this.props.onValueChange(componentValues);\n  }\n\n  _renderHeader(item, expanded) {\n    const label = this.getLabel(item);\n    return (\n      <View\n        style={{\n          padding: 5,\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          backgroundColor: '#fafafa',\n          ...this.props.styles,\n        }}\n      >\n        <View style={{ ...this.props.styles, flexDirection: 'row' }}>\n          {expanded\n            ? <Icon style={{ fontSize: 18 }} name='remove-circle' />\n            : <Icon style={{ fontSize: 18 }} name='add-circle' />\n          }\n          <Item stackedLabel style={{ ...this.props.styles, maxWidth: this.props.styles.minWidth }}>\n            <Label>{label}</Label>\n            <IoUI\n              item={item}\n              value={this.props.value}\n              onValueChange={this.props.onValueChange}\n              styles={this.props.styles}\n              readonly={this.props.readonly}\n            />\n          </Item>\n        </View>\n      </View>\n    )\n  }\n\n  _renderContent(item) {\n    return (item.components || []).map((subio, i) => {\n      return (\n        <FunctionIo\n          key={i}\n          styles={this.props.styles}\n          item={subio}\n          value={this.props.value[i]}\n          onValueChange={(value) => this.onComponentsValueChange(value, i)}\n          readonly={this.props.readonly}\n        />\n      );\n    });\n  }\n\n  render() {\n    const { item, styles, readonly } = this.props;\n    if (!item) return (<Text>---</Text>);\n\n    const label = this.getLabel(item);\n    return (\n      <View style={{ ...styles, flexDirection: 'row', alignItems: 'center'}}>\n        {!item.components || item.components.length === 0\n          ? <Item stackedLabel style={{ width: '100%' }}>\n            <Label>{label}</Label>\n            <IoUI\n              styles={styles}\n              item={item}\n              value={this.props.value}\n              onValueChange={this.props.onValueChange}\n              readonly={readonly}\n            />\n          </Item>\n          : <Accordion\n            dataArray={[item]}\n            expanded={0}\n            renderHeader={this._renderHeader}\n            renderContent={this._renderContent}\n            contentStyle={{ ...styles, flex: 1, backgroundColor: '#ffffff' }}\n          />\n        }\n      </View>\n    );\n  }\n}\n","export const CHAIN_NAMES = {\n  1: 'mainnet',\n  3: 'ropsten',\n  4: 'rinkeby',\n  5: 'goerli',\n  42: 'kovan',\n}\n\nexport const getEtherscanApi = (chainid) => {\n  let chainname = CHAIN_NAMES[chainid];\n  if (chainid === 1) chainname = '';\n  else chainname += '.';\n  return `https://${chainname}etherscan.io`;\n}\n\nexport const getEtherscanApiContract = (chainid, address) => {\n  return `${getEtherscanApi(chainid)}/address/${address}#code`;\n}\n\nexport const getEtherscanTx = (chainid, txhash) => {\n  return `${getEtherscanApi(chainid)}/tx/${txhash}`;\n}\n\nexport const PRERECEIPT_TYPE = {\n  name: 'receipt',\n  type: 'tuple',\n  components: [\n    {\n      name: 'etherscan',\n      type: 'link',\n    },\n    {\n      name: 'hash',\n      type: 'string',\n    },\n    {\n      name: 'blockHash',\n      type: 'string',\n    },\n    {\n      name: 'blockNumber',\n      type: 'uint256',\n    },\n    {\n      name: 'confirmations',\n      type: 'uint256',\n    },\n  ]\n}\n\nexport const RECEIPT_TYPE = {\n  name: 'receipt',\n  type: 'tuple',\n  components: [\n    {\n      name: 'etherscan',\n      type: 'link',\n    },\n    {\n      name: 'transactionHash',\n      type: 'string',\n    },\n    {\n      name: 'blockHash',\n      type: 'string',\n    },\n    {\n      name: 'blockNumber',\n      type: 'uint256',\n    },\n    {\n      name: 'confirmations',\n      type: 'uint256',\n    },\n  ]\n}\n","import React, { Component } from 'react';\nimport { StyleSheet } from 'react-native';\nimport {\n  Content,\n  View,\n  Card,\n  CardItem,\n  Icon,\n  Text,\n  Button,\n  H1,\n  Right,\n  Left,\n} from 'native-base';\n\nimport FunctionIo from './FunctionIo.js';\nimport { getEtherscanTx, PRERECEIPT_TYPE, RECEIPT_TYPE } from './utils.js';\n\nfunction defaultVals(abityp) {\n  if (!abityp || !abityp.components) {\n    return [];\n  }\n  let item = new Array(abityp.components.length);\n  abityp.components.forEach((comp, i) => {\n    if (comp.components) {\n      item[i] = defaultVals(comp);\n    }\n  });\n  return item;\n}\n\nexport default class FunctionCall extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inputs: this.initInputsState(),\n      outputs: this.initOutputsState(),\n    }\n\n    this.buttonStyle = props.buttonStyle || styles.buttonStyle;\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onRun = this.onRun.bind(this);\n  }\n\n  initInputsState() {\n    const { pfunction } = this.props.item;\n    const ioGapiInputs = this.ioGapiInputs(pfunction);\n    return ioGapiInputs && ioGapiInputs.components\n      ? new Array(ioGapiInputs.components.length)\n      : [];\n  }\n\n  initOutputsState() {\n    const { pfunction } = this.props.item;\n    const ioGapiOutputs = this.ioGapiOutputs(pfunction);\n    return defaultVals(ioGapiOutputs);\n  }\n\n  typesig(typ) {\n    let sig = '';\n    if (typ.name) sig += `${typ.name}:`;\n    sig += typ.type;\n    return sig;\n  }\n\n  ioGapiInputs(pfunction) {\n    const signatureInp = `(${pfunction.gapi.inputs.map(inp => this.typesig(inp)).join(',')})`;\n\n    return pfunction.gapi.inputs.length > 0 ? {\n      name: pfunction.signatureString,\n      type: 'tuple',\n      components: pfunction.gapi.inputs,\n      label: signatureInp,\n    } : null;\n  }\n\n  ioGapiOutputs(pfunction) {\n    let outputs = JSON.parse(JSON.stringify(\n      pfunction.gapi.outputs || []\n    ));\n\n    let signatureOut = `(${outputs.map(inp => this.typesig(inp)).join(',')})`;\n\n    if (\n      pfunction.gapi.stateMutability === 'payable'\n      || pfunction.gapi.stateMutability === 'nonpayable'\n    ) {\n      outputs = PRERECEIPT_TYPE.components;\n      signatureOut = 'receipt' + `(${outputs.map(inp => this.typesig(inp)).join(',')})`;\n    }\n\n    return outputs.length > 0 ? {\n      name: pfunction.signatureString,\n      type: 'tuple',\n      components: outputs,\n      label: signatureOut,\n    } : null;\n  }\n\n  onValueChange(inputs) {\n    this.setState({ inputs });\n    if (this.props.onChange) {\n      this.props.onChange({ inputs, outputs: this.state.outputs });\n    }\n  }\n\n  async onRun() {\n    const { deployment, pfunction } = this.props.item;\n    const { onRun } = this.props;\n\n    const result = await onRun(this.state.inputs);\n\n    console.log('result', result);\n    let outputs = (result instanceof Array) ? result : [result];\n\n    if (\n      pfunction.gapi.stateMutability === 'payable'\n      || pfunction.gapi.stateMutability === 'nonpayable'\n    ) {\n      outputs = PRERECEIPT_TYPE.components.map(comp => {\n        if (comp.name === 'etherscan') {\n          return getEtherscanTx(deployment.chainid, result.hash);\n        }\n        if (!result[comp.name]) return 'waiting';\n        return result[comp.name];\n      });\n      this.setState({ outputs });\n\n      const receipt = await result.wait(2);\n      console.log('receipt', receipt);\n\n      outputs = RECEIPT_TYPE.components.map(comp => {\n        if (comp.name === 'etherscan') {\n          return getEtherscanTx(deployment.chainid, receipt.transactionHash);\n        }\n        return receipt[comp.name];\n      });\n    }\n\n    this.setState({ outputs });\n\n    if (this.props.onChange) {\n      this.props.onChange({ inputs: this.state.inputs, outputs});\n    }\n  }\n\n  render() {\n    const { pfunction } = this.props.item;\n    const width = this.props.styles.minWidth - 40;\n    const ioStyles = { minWidth: width, width };\n\n    const ioGapiInputs = this.ioGapiInputs(pfunction);\n    const ioGapiOutputs = this.ioGapiOutputs(pfunction);\n\n    return (\n      <View style={{...this.props.styles, flex: 1, width: this.props.styles.minWidth }}>\n        <Content>\n          <CardItem style={{ backgroundColor: this.props.pfunctionColor(pfunction.gapi) }}>\n            <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n              <H1 style={{ paddingRight: 20 }}>{pfunction.gapi.name}</H1>\n            </View>\n          </CardItem>\n          <Card>\n            <CardItem header>\n              <Text>Inputs</Text>\n            </CardItem>\n            <CardItem>\n              <FunctionIo\n                item={ioGapiInputs}\n                value={this.state.inputs}\n                onValueChange={this.onValueChange}\n                styles={ioStyles}\n              />\n            </CardItem>\n            <CardItem header>\n              <Text>Outputs</Text>\n            </CardItem>\n            <CardItem>\n              <FunctionIo\n                item={ioGapiOutputs}\n                readonly={true}\n                value={this.state.outputs}\n                styles={ioStyles}\n              />\n            </CardItem>\n          </Card>\n        </Content>\n        <View style={{\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: 5,\n          borderTopWidth: 1,\n          borderTopColor: '#cccccc',\n        }}>\n          <Left>\n            <Button small rounded style={this.buttonStyle} onClick={this.props.onInfoClosed} >\n              <Icon type='MaterialCommunityIcons' name='close' />\n            </Button>\n          </Left>\n          <Right>\n            <Button small rounded style={this.buttonStyle} onClick={this.onRun} >\n              <Icon type='MaterialCommunityIcons' name='play' />\n            </Button>\n          </Right>\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n    },\n  }\n)\n"],"names":["nonStringTypes","checkNonString","find","itemType","includes","typ","decodeValueString","value","encodeValueString","decodeValueNonString","JSON","parse","encodeValueNonString","stringify","IoUI","props","item","isNonString","type","decodeValue","encodeValue","color","text","onValueChange","styles","readonly","FunctionIo","state","onComponentsValueChange","bind","onOpenComponents","_renderHeader","_renderContent","label","name","setState","componentsOpened","i","componentValues","expanded","getLabel","flexDirection","fontSize","maxWidth","minWidth","components","map","subio","alignItems","length","width","flex","backgroundColor","Component","CHAIN_NAMES","getEtherscanApi","chainid","chainname","getEtherscanTx","txhash","PRERECEIPT_TYPE","RECEIPT_TYPE","defaultVals","abityp","Array","forEach","comp","FunctionCall","initInputsState","initOutputsState","buttonStyle","onRun","pfunction","ioGapiInputs","ioGapiOutputs","sig","signatureInp","gapi","inputs","typesig","inp","join","signatureString","outputs","signatureOut","stateMutability","onChange","deployment","log","result","hash","wait","receipt","transactionHash","ioStyles","pfunctionColor","paddingRight","onInfoClosed","StyleSheet","create"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,IAAMA,iBAAiB,CAAC,KAAD,EAAQ,OAAR,EAAiB,OAAjB,EAA0B,SAA1B,CAAvB;AACA,IAAMC,iBAAiB,SAAjBA,cAAiB;SAAYD,eAAeE,IAAf,CAAoB;WAAOC,SAASC,QAAT,CAAkBC,GAAlB,CAAP;GAApB,CAAZ;CAAvB;AACA,IAAMC,oBAAoB,SAApBA,iBAAoB;SAASC,SAAS,EAAlB;CAA1B;AACA,IAAMC,oBAAoB,SAApBA,iBAAoB;SAASD,SAAS,EAAlB;CAA1B;AACA,IAAME,uBAAuB,SAAvBA,oBAAuB;SAASF,QAAQG,KAAKC,KAAL,CAAWJ,KAAX,CAAR,GAA4B,IAArC;CAA7B;AACA,IAAMK,uBAAuB,SAAvBA,oBAAuB;SAASL,QAAQG,KAAKG,SAAL,CAAeN,KAAf,CAAR,GAAgC,EAAzC;CAA7B;;AAEA,SAASO,IAAT,CAAcC,KAAd,EAAqB;MACXC,IADW,GACFD,KADE,CACXC,IADW;;MAEbC,cAAchB,eAAee,KAAKE,IAApB,CAApB;MACIC,oBAAJ;MAAiBC,oBAAjB;;MAEIH,WAAJ,EAAiB;kBACDR,oBAAd;kBACcG,oBAAd;GAFF,MAGO;kBACSN,iBAAd;kBACcE,iBAAd;;;MAGEQ,KAAKE,IAAL,KAAc,MAAlB,EAA0B;WAEtB;UAAA;;2BACoB,MADpB;cAEQH,MAAMR,KAFd;eAGS,EAACc,OAAO,MAAR,EAHT;gBAIS;;YAEAd;KAPX;;;SAaA,oBAAC,KAAD;WACSa,YAAYL,MAAMR,KAAlB,CADT;kBAEgB,sBAACe,IAAD;aAAUP,MAAMQ,aAAN,CAAoBJ,YAAYG,IAAZ,CAApB,CAAV;KAFhB;YAGUP,MAAMS,MAHhB;cAIYT,MAAMU;IALpB;;;IAUmBC;;;;;;;sBAKPX,KAAZ,EAAmB;;;uHACXA,KADW;;UAEZY,KAAL,GAAa;wBACO,KADP;uBAEMZ,MAAMR;;;KAFzB,CAMA,MAAKqB,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BC,IAA7B,OAA/B;UACKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,OAAxB;;UAEKE,aAAL,GAAqB,MAAKA,aAAL,CAAmBF,IAAnB,OAArB;UACKG,cAAL,GAAsB,MAAKA,cAAL,CAAoBH,IAApB,OAAtB;;;;;;6BAGOb,MAAM;aACNA,KAAKiB,KAAL,IAAiBjB,KAAKkB,IAAtB,SAA8BlB,KAAKE,IAA1C;;;;uCAGiB;WACZiB,QAAL,CAAc,EAAEC,kBAAkB,IAApB,EAAd;;;;4CAGsB7B,OAAO8B,GAAG;UAC1BC,kBAAkB,KAAKX,KAAL,CAAWW,eAAnC;sBACgBD,CAAhB,IAAqB9B,KAArB;WACK4B,QAAL,CAAc,EAAEG,gCAAF,EAAd;WACKvB,KAAL,CAAWQ,aAAX,CAAyBe,eAAzB;;;;kCAGYtB,MAAMuB,UAAU;UACtBN,QAAQ,KAAKO,QAAL,CAAcxB,IAAd,CAAd;aAEE;YAAA;;;qBAEa,CADX;2BAEiB,KAFjB;4BAGkB,eAHlB;wBAIc,QAJd;6BAKmB;aACd,KAAKD,KAAL,CAAWS,MANhB;;;cASA;YAAM,oBAAY,KAAKT,KAAL,CAAWS,MAAvB,IAA+BiB,eAAe,KAA9C,GAAN;qBAEM,oBAAC,IAAD,IAAM,OAAO,EAAEC,UAAU,EAAZ,EAAb,EAA+B,MAAK,eAApC,GADH,GAEG,oBAAC,IAAD,IAAM,OAAO,EAAEA,UAAU,EAAZ,EAAb,EAA+B,MAAK,YAApC,GAHN;;gBAKE;cAAM,kBAAN,EAAmB,oBAAY,KAAK3B,KAAL,CAAWS,MAAvB,IAA+BmB,UAAU,KAAK5B,KAAL,CAAWS,MAAX,CAAkBoB,QAA3D,GAAnB;;mBACE;;;aADF;gCAEG,IAAD;oBACQ5B,IADR;qBAES,KAAKD,KAAL,CAAWR,KAFpB;6BAGiB,KAAKQ,KAAL,CAAWQ,aAH5B;sBAIU,KAAKR,KAAL,CAAWS,MAJrB;wBAKY,KAAKT,KAAL,CAAWU;;;;OAvB/B;;;;mCA+BaT,MAAM;;;aACZ,CAACA,KAAK6B,UAAL,IAAmB,EAApB,EAAwBC,GAAxB,CAA4B,UAACC,KAAD,EAAQV,CAAR,EAAc;eAE7C,oBAAC,UAAD;eACOA,CADP;kBAEU,OAAKtB,KAAL,CAAWS,MAFrB;gBAGQuB,KAHR;iBAIS,OAAKhC,KAAL,CAAWR,KAAX,CAAiB8B,CAAjB,CAJT;yBAKiB,uBAAC9B,KAAD;mBAAW,OAAKqB,uBAAL,CAA6BrB,KAA7B,EAAoC8B,CAApC,CAAX;WALjB;oBAMY,OAAKtB,KAAL,CAAWU;UAPzB;OADK,CAAP;;;;6BAcO;mBAC4B,KAAKV,KADjC;UACCC,IADD,UACCA,IADD;UACOQ,MADP,UACOA,MADP;UACeC,QADf,UACeA,QADf;;UAEH,CAACT,IAAL,EAAW,OAAQ;YAAA;;;OAAR;;UAELiB,QAAQ,KAAKO,QAAL,CAAcxB,IAAd,CAAd;aAEE;YAAA;UAAM,oBAAYQ,MAAZ,IAAoBiB,eAAe,KAAnC,EAA0CO,YAAY,QAAtD,GAAN;SACIhC,KAAK6B,UAAN,IAAoB7B,KAAK6B,UAAL,CAAgBI,MAAhB,KAA2B,CAA/C,GACG;cAAA;YAAM,kBAAN,EAAmB,OAAO,EAAEC,OAAO,MAAT,EAA1B;;iBACA;;;WADA;8BAEC,IAAD;oBACU1B,MADV;kBAEQR,IAFR;mBAGS,KAAKD,KAAL,CAAWR,KAHpB;2BAIiB,KAAKQ,KAAL,CAAWQ,aAJ5B;sBAKYE;;SARf,GAWG,oBAAC,SAAD;qBACW,CAACT,IAAD,CADX;oBAEU,CAFV;wBAGc,KAAKe,aAHnB;yBAIe,KAAKC,cAJpB;qCAKmBR,MAAnB,IAA2B2B,MAAM,CAAjC,EAAoCC,iBAAiB,SAArD;;OAlBR;;;;EAxFoCC;;ACvDjC,IAAMC,cAAc;KACtB,SADsB;KAEtB,SAFsB;KAGtB,SAHsB;KAItB,QAJsB;MAKrB;CALC;;AAQP,AAAO,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,OAAD,EAAa;MACtCC,YAAYH,YAAYE,OAAZ,CAAhB;MACIA,YAAY,CAAhB,EAAmBC,YAAY,EAAZ,CAAnB,KACKA,aAAa,GAAb;sBACaA,SAAlB;CAJK;;AAWP,AAAO,IAAMC,iBAAiB,SAAjBA,cAAiB,CAACF,OAAD,EAAUG,MAAV,EAAqB;SACvCJ,gBAAgBC,OAAhB,CAAV,YAAyCG,MAAzC;CADK;;AAIP,AAAO,IAAMC,kBAAkB;QACvB,SADuB;QAEvB,OAFuB;cAGjB,CACV;UACQ,WADR;UAEQ;GAHE,EAKV;UACQ,MADR;UAEQ;GAPE,EASV;UACQ,WADR;UAEQ;GAXE,EAaV;UACQ,aADR;UAEQ;GAfE,EAiBV;UACQ,eADR;UAEQ;GAnBE;CAHP;;AA2BP,AAAO,IAAMC,eAAe;QACpB,SADoB;QAEpB,OAFoB;cAGd,CACV;UACQ,WADR;UAEQ;GAHE,EAKV;UACQ,iBADR;UAEQ;GAPE,EASV;UACQ,WADR;UAEQ;GAXE,EAaV;UACQ,aADR;UAEQ;GAfE,EAiBV;UACQ,eADR;UAEQ;GAnBE;CAHP;;AChCP,SAASC,WAAT,CAAqBC,MAArB,EAA6B;MACvB,CAACA,MAAD,IAAW,CAACA,OAAOlB,UAAvB,EAAmC;WAC1B,EAAP;;MAEE7B,OAAO,IAAIgD,KAAJ,CAAUD,OAAOlB,UAAP,CAAkBI,MAA5B,CAAX;SACOJ,UAAP,CAAkBoB,OAAlB,CAA0B,UAACC,IAAD,EAAO7B,CAAP,EAAa;QACjC6B,KAAKrB,UAAT,EAAqB;WACdR,CAAL,IAAUyB,YAAYI,IAAZ,CAAV;;GAFJ;SAKOlD,IAAP;;;IAGmBmD;;;wBACPpD,KAAZ,EAAmB;;;2HACXA,KADW;;UAGZY,KAAL,GAAa;cACH,MAAKyC,eAAL,EADG;eAEF,MAAKC,gBAAL;KAFX;;UAKKC,WAAL,GAAmBvD,MAAMuD,WAAN,IAAqB9C,OAAO8C,WAA/C;;UAEK/C,aAAL,GAAqB,MAAKA,aAAL,CAAmBM,IAAnB,OAArB;UACK0C,KAAL,GAAa,MAAKA,KAAL,CAAW1C,IAAX,OAAb;;;;;;sCAGgB;UACR2C,SADQ,GACM,KAAKzD,KAAL,CAAWC,IADjB,CACRwD,SADQ;;UAEVC,eAAe,KAAKA,YAAL,CAAkBD,SAAlB,CAArB;aACOC,gBAAgBA,aAAa5B,UAA7B,GACH,IAAImB,KAAJ,CAAUS,aAAa5B,UAAb,CAAwBI,MAAlC,CADG,GAEH,EAFJ;;;;uCAKiB;UACTuB,SADS,GACK,KAAKzD,KAAL,CAAWC,IADhB,CACTwD,SADS;;UAEXE,gBAAgB,KAAKA,aAAL,CAAmBF,SAAnB,CAAtB;aACOV,YAAYY,aAAZ,CAAP;;;;4BAGMrE,KAAK;UACPsE,MAAM,EAAV;UACItE,IAAI6B,IAAR,EAAcyC,OAAUtE,IAAI6B,IAAd;aACP7B,IAAIa,IAAX;aACOyD,GAAP;;;;iCAGWH,WAAW;;;UAChBI,qBAAmBJ,UAAUK,IAAV,CAAeC,MAAf,CAAsBhC,GAAtB,CAA0B;eAAO,OAAKiC,OAAL,CAAaC,GAAb,CAAP;OAA1B,EAAoDC,IAApD,CAAyD,GAAzD,CAAnB,MAAN;;aAEOT,UAAUK,IAAV,CAAeC,MAAf,CAAsB7B,MAAtB,GAA+B,CAA/B,GAAmC;cAClCuB,UAAUU,eADwB;cAElC,OAFkC;oBAG5BV,UAAUK,IAAV,CAAeC,MAHa;eAIjCF;OAJF,GAKH,IALJ;;;;kCAQYJ,WAAW;;;UACnBW,UAAUzE,KAAKC,KAAL,CAAWD,KAAKG,SAAL,CACvB2D,UAAUK,IAAV,CAAeM,OAAf,IAA0B,EADH,CAAX,CAAd;;UAIIC,qBAAmBD,QAAQrC,GAAR,CAAY;eAAO,OAAKiC,OAAL,CAAaC,GAAb,CAAP;OAAZ,EAAsCC,IAAtC,CAA2C,GAA3C,CAAnB,MAAJ;;UAGET,UAAUK,IAAV,CAAeQ,eAAf,KAAmC,SAAnC,IACGb,UAAUK,IAAV,CAAeQ,eAAf,KAAmC,YAFxC,EAGE;kBACUzB,gBAAgBf,UAA1B;uBACe,mBAAgBsC,QAAQrC,GAAR,CAAY;iBAAO,OAAKiC,OAAL,CAAaC,GAAb,CAAP;SAAZ,EAAsCC,IAAtC,CAA2C,GAA3C,CAAhB,OAAf;;;aAGKE,QAAQlC,MAAR,GAAiB,CAAjB,GAAqB;cACpBuB,UAAUU,eADU;cAEpB,OAFoB;oBAGdC,OAHc;eAInBC;OAJF,GAKH,IALJ;;;;kCAQYN,QAAQ;WACf3C,QAAL,CAAc,EAAE2C,cAAF,EAAd;UACI,KAAK/D,KAAL,CAAWuE,QAAf,EAAyB;aAClBvE,KAAL,CAAWuE,QAAX,CAAoB,EAAER,cAAF,EAAUK,SAAS,KAAKxD,KAAL,CAAWwD,OAA9B,EAApB;;;;;;;;;;;;;8BAKgC,KAAKpE,KAAL,CAAWC,MAArCuE,yBAAAA,YAAYf,wBAAAA;wBACF,KAAKzD,MAAfwD;;uBAEaA,MAAM,KAAK5C,KAAL,CAAWmD,MAAjB;;;;;;wBAEbU,GAAR,CAAY,QAAZ,EAAsBC,MAAtB;0BACeA,kBAAkBzB,KAAnB,GAA4ByB,MAA5B,GAAqC,CAACA,MAAD;;sBAGjDjB,UAAUK,IAAV,CAAeQ,eAAf,KAAmC,SAAnC,IACGb,UAAUK,IAAV,CAAeQ,eAAf,KAAmC;;;;;0BAE5BzB,gBAAgBf,UAAhB,CAA2BC,GAA3B,CAA+B,gBAAQ;sBAC3CoB,KAAKhC,IAAL,KAAc,WAAlB,EAA+B;2BACtBwB,eAAe6B,WAAW/B,OAA1B,EAAmCiC,OAAOC,IAA1C,CAAP;;sBAEE,CAACD,OAAOvB,KAAKhC,IAAZ,CAAL,EAAwB,OAAO,SAAP;yBACjBuD,OAAOvB,KAAKhC,IAAZ,CAAP;iBALQ,CAAV;qBAOKC,QAAL,CAAc,EAAEgD,gBAAF,EAAd;;;uBAEsBM,OAAOE,IAAP,CAAY,CAAZ;;;;;wBACdH,GAAR,CAAY,SAAZ,EAAuBI,OAAvB;;0BAEU/B,aAAahB,UAAb,CAAwBC,GAAxB,CAA4B,gBAAQ;sBACxCoB,KAAKhC,IAAL,KAAc,WAAlB,EAA+B;2BACtBwB,eAAe6B,WAAW/B,OAA1B,EAAmCoC,QAAQC,eAA3C,CAAP;;yBAEKD,QAAQ1B,KAAKhC,IAAb,CAAP;iBAJQ,CAAV;;;;qBAQGC,QAAL,CAAc,EAAEgD,gBAAF,EAAd;;oBAEI,KAAKpE,KAAL,CAAWuE,QAAf,EAAyB;uBAClBvE,KAAL,CAAWuE,QAAX,CAAoB,EAAER,QAAQ,KAAKnD,KAAL,CAAWmD,MAArB,EAA6BK,gBAA7B,EAApB;;;;;;;;;;;;;;;;;;;6BAIK;UACCX,SADD,GACe,KAAKzD,KAAL,CAAWC,IAD1B,CACCwD,SADD;;UAEDtB,QAAQ,KAAKnC,KAAL,CAAWS,MAAX,CAAkBoB,QAAlB,GAA6B,EAA3C;UACMkD,WAAW,EAAElD,UAAUM,KAAZ,EAAmBA,YAAnB,EAAjB;;UAEMuB,eAAe,KAAKA,YAAL,CAAkBD,SAAlB,CAArB;UACME,gBAAgB,KAAKA,aAAL,CAAmBF,SAAnB,CAAtB;;aAGE;YAAA;UAAM,oBAAW,KAAKzD,KAAL,CAAWS,MAAtB,IAA8B2B,MAAM,CAApC,EAAuCD,OAAO,KAAKnC,KAAL,CAAWS,MAAX,CAAkBoB,QAAhE,GAAN;;iBACE;;;oBACE;cAAU,OAAO,EAAEQ,iBAAiB,KAAKrC,KAAL,CAAWgF,cAAX,CAA0BvB,UAAUK,IAApC,CAAnB,EAAjB;;kBACE;gBAAM,OAAO,EAAEpC,eAAe,KAAjB,EAAwBO,YAAY,QAApC,EAAb;;kBACE;kBAAI,OAAO,EAAEgD,cAAc,EAAhB,EAAX;0BAA4CnB,IAAV,CAAe3C;;;WAHvD;;gBAME;;;sBACE;gBAAU,YAAV;;oBACE;;;;aAFJ;;sBAIE;;kCACG,UAAD;sBACQuC,YADR;uBAES,KAAK9C,KAAL,CAAWmD,MAFpB;+BAGiB,KAAKvD,aAHtB;wBAIUuE;;aATd;;sBAYE;gBAAU,YAAV;;oBACE;;;;aAbJ;;sBAeE;;kCACG,UAAD;sBACQpB,aADR;0BAEY,IAFZ;uBAGS,KAAK/C,KAAL,CAAWwD,OAHpB;wBAIUW;;;;SA3BlB;;cAgCE;YAAM,OAAO;6BACI,KADJ;8BAEK,eAFL;0BAGC,QAHD;uBAIF,CAJE;8BAKK,CALL;8BAMK;aANlB;;gBAQE;;;oBACE;gBAAQ,WAAR,EAAc,aAAd,EAAsB,OAAO,KAAKxB,WAAlC,EAA+C,SAAS,KAAKvD,KAAL,CAAWkF,YAAnE;kCACG,IAAD,IAAM,MAAK,wBAAX,EAAoC,MAAK,OAAzC;;WAVN;;iBAaE;;;oBACE;gBAAQ,WAAR,EAAc,aAAd,EAAsB,OAAO,KAAK3B,WAAlC,EAA+C,SAAS,KAAKC,KAA7D;kCACG,IAAD,IAAM,MAAK,wBAAX,EAAoC,MAAK,MAAzC;;;;OAhDV;;;;EA7HsClB;;;AAsL1C,IAAM7B,SAAS0E,WAAWC,MAAX,CACb;eACe;qBACM;;CAHR,CAAf;;;;"}